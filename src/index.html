<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World!</title>
    <link rel="stylesheet" href="index.css" />
    <style>
      body {
        padding: 0;
        width: 90%;
        margin:0 auto;
      }
      .flex-container {
        display: flex;
        margin-bottom: 10px;
      }
      .flex-item {
        margin-right: 20px;
      }
    </style>
  </head>
  <body>
    <h1>TEST SAZENI SAY 3</h1>
    <h2>Aktualizaovano celkem : <span id="update-count"></span>x</h2>
    <div id="container">

    </div>
    <script>
      const {ipcRenderer} = require("electron")
      const {GetProfitMarginCombo} = require("./constants.js");
      const {TipWrapper} = require("./constants.js");

      ipcRenderer.on("scraped", (event, data) => {
        const resultsContainer = document.getElementById("container");
        resultsContainer.innerHTML = "";

        document.getElementById("update-count").innerText = data['updates'].toString();
        data['pairs'].forEach((pair) => {
          let fort = pair['fortuna'] ;
          let tipsp = pair['tipsport']

          var testM = GetProfitMarginCombo(fort.oddWinFirst, fort.oddNotLossSecond) * 100
          var testT = GetProfitMarginCombo(tipsp.oddWinFirst, tipsp.oddNotLossSecond) * 100

          var testMM = GetProfitMarginCombo(fort.oddWinSecond, fort.oddNotLossFirst) * 100
          var testMT = GetProfitMarginCombo(tipsp.oddWinSecond, fort.oddNotLossFirst) * 100

          var marginLvN = GetProfitMarginCombo(fort.oddWinFirst, tipsp.oddNotLossSecond) * 100
          var marginNvL = GetProfitMarginCombo(fort.oddNotLossFirst, tipsp.oddWinSecond) * 100

          var marginLvNT = GetProfitMarginCombo(tipsp.oddWinFirst, fort.oddNotLossSecond) * 100
          var marginNvLT = GetProfitMarginCombo(tipsp.oddNotLossFirst, fort.oddWinSecond) * 100

          const flexContainer = document.createElement("div");
          flexContainer.className = "flex-container";

          const nameElement = document.createElement("div");
          nameElement.className = "flex-item";
          nameElement.textContent = fort.match; // Assuming 'match' is the name
          flexContainer.appendChild(nameElement);

          // Create and append the profit margin elements
          [testM, testT, testMM, testMT, marginLvN, marginNvL, marginLvNT, marginNvLT].forEach((margin) => {
            const marginElement = document.createElement("div");
            marginElement.className = "flex-item";
            marginElement.textContent = margin.toFixed(2) + "%"; // Format the margin
            marginElement.style.color = margin < 0 ? "red" : "green";
            flexContainer.appendChild(marginElement);
          });

          // Append the flex container to the results container
          resultsContainer.appendChild(flexContainer);
        });
      });
    </script>
  </body>
</html>
